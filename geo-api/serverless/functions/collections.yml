collections-index:
  handler: app.handlers.geo_collections.index
  events:
    - http:
        path: collections
        method: get
        cors: true
        authorizer: authorizer
        documentation:
          summary: "Collection index"
          description: "All accessable Collections"
          tags:
            - collections
          methodResponses:
            -
              statusCode: "200"
              responseBody:
                description: "Collections"
              responseModels:
                "application/json": "Collections"

collections-get:
  handler: app.handlers.geo_collections.get
  events:
    - http:
        path: collections/{collection_uuid}
        method: get
        cors: true
        authorizer: authorizer
        documentation:
          summary: "Get collection"
          description: "Get collection"
          tags:
            - collections
          pathParams:
            - ${file(serverless/documentation/pathParams.yml):collection_uuid}
          methodResponses:
            - statusCode: "200"
            - ${file(serverless/documentation/methodResponses.yml):error404}
            - ${file(serverless/documentation/methodResponses.yml):error500}

collections-delete:
  handler: app.handlers.geo_collections.delete
  events:
    - http:
        path: collections/{collection_uuid}
        method: delete
        cors: true
        authorizer: authorizer
        documentation:
          summary: "Delete collection"
          description: "Delete collection"
          tags:
            - collections
          pathParams:
            - ${file(serverless/documentation/pathParams.yml):collection_uuid}
          methodResponses:
            - statusCode: "204"
            - ${file(serverless/documentation/methodResponses.yml):error404}
            - ${file(serverless/documentation/methodResponses.yml):error500}

collections-update:
  handler: app.handlers.geo_collections.update
  events:
    - http:
        path: collections/{collection_uuid}
        method: put
        cors: true
        authorizer: authorizer
        documentation:
          summary: "Update collection"
          description: "Update collection"
          tags:
            - collections
          pathParams:
            - ${file(serverless/documentation/pathParams.yml):collection_uuid}
          requestModels:
            "application/json": "UpdateCollection"
          methodResponses:
            - statusCode: "204"
            - ${file(serverless/documentation/methodResponses.yml):error404}
            - ${file(serverless/documentation/methodResponses.yml):error500}

collections-create:
  handler: app.handlers.geo_collections.create
  events:
    - http:
        path: collections
        method: post
        cors: true
        authorizer: authorizer
        documentation:
          summary: "Collection index"
          description: "All accessable Collections"
          tags:
            - collections
          requestModels:
            "application/json": "CreateCollection"
          methodResponses:
            - ${file(serverless/documentation/methodResponses.yml):uuid}
            - ${file(serverless/documentation/methodResponses.yml):error404}
            - ${file(serverless/documentation/methodResponses.yml):error500}

collections-copy:
  handler: app.handlers.geo_collections.copy
  events:
    - http:
        path: collections/{src_collection_uuid}/copy/{dst_collection_uuid?}
        method: post
        cors: true
        authorizer: authorizer
        documentation:
          summary: "Copy collection"
          description: "Copy collection"
          tags:
            - collections
          pathParams:
            - ${file(serverless/documentation/pathParams.yml):src_collection_uuid}
            - ${file(serverless/documentation/pathParams.yml):dst_collection_uuid}
          methodResponses:
            - statusCode: "201"
            - ${file(serverless/documentation/methodResponses.yml):error403}
            - ${file(serverless/documentation/methodResponses.yml):error404}
            - ${file(serverless/documentation/methodResponses.yml):error500}